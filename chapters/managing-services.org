* Managing services

 =rcctl= â€“ configure and control daemons and services


** List services

#+BEGIN_SRC bash
  #
  # List all services and daemons
  #
  rcctl ls all

  #
  # List enabled services and daemons
  #
  rcctl ls on

  #
  # List enabled but stopped daemons
  #
  rcctl ls failed

  #
  # List disabled services and daemons
  #
  rcctl ls off

  #
  # List daemons which are disabled but currently running
  #
  rcctl ls rogue

  #
  # List running daemons
  #
  rcctl ls started
  
  #
  # List stopped daemons
  #
  rcctl ls stopped
#+END_SRC


** Enable/Disable, check service

#+BEGIN_SRC bash
  #
  # Enable service
  #
  rcctl enable SERVICE 
  rcctl set SERVICE status on

  #
  # Disable service
  #
  rcctl disable SERVICE
  rcctl set SERVICE status of

  #
  # Check service status
  #
  rcctl check SERVICE

  #
  # Stop, start and restart
  #
  rcctl stop SERVICE
  rcctl start SERVICE
  rcctl restart SERVICE
#+END_SRC


** Get service settings

  =rcctl get SERVICE=: Display service current settings
  =rcctl getdef SERVICE=: Display service default settings

#+BEGIN_SRC bash
  rcctl getdef smtpd

  # smtpd_class=daemon
  # smtpd_execdir=
  # smtpd_flags=
  # smtpd_logger=
  # smtpd_rtable=0
  # smtpd_timeout=30
  # smtpd_user=root
#+END_SRC


** Set service settings on the fly

#+BEGIN_SRC bash
  #
  # Set `flags`
  #
  rcctl set apmd flags -A

  #
  # Get settings to confirm
  #
  rcctl get apmd
  # apmd_class=daemon
  # apmd_execdir=
  # apmd_flags=-A
  # apmd_logger=
  # apmd_rtable=0
  # apmd_timeout=30
  # apmd_user=root 
#+END_SRC


** Configuration file

 All services enable or not are configure in =/etc/rc.conf=, super simple:)

 But plz **DO NOT** modify the =/etc/rc.conf=, just keep that to default settings, as it will be changed when upgrading to new version. So, for your personal customized service, just use =rcctl= to save them into =/etc/rc.conf.local=!!!

#+BEGIN_SRC conf
  # DO NOT EDIT THIS FILE!!
  #
  # This file defines the default service selection as shipped in a
  # release.  Upgrades of your system will modify this file.
  #
  # To select the service options you desire, please override these
  # options in the file /etc/rc.conf.local
  #
  # DO NOT EDIT THIS FILE!!
  #
  # Set these variables to "NO" to turn the respective service off.
  # Set them to "" to run them with the default flags.
  # Otherwise, these variables override the default flags.
  apmd_flags=NO
  bgpd_flags=NO
  bgplgd_flags=NO
  bootparamd_flags=NO
  cron_flags=
  dhcpd_flags=NO
  dhcpleased_flags=
  # ...ignore the rest
#+END_SRC
